import{c as b,t as V,U as F,V as G,g as J,W as X,D as Y,i as Z,w as Q,X as K,r as O,s as I,Y as k,n as ee,Z as te,u as w,$ as ae,a0 as re,a1 as B,a2 as ie,a3 as z,a4 as P,a5 as se,a6 as M,a7 as oe,a8 as ne,d as ce,a9 as le,o as ue,q as me,l as de,m as N,aa as fe,j as ge}from"./Bxez_L7f.js";const{format:Xe}=new Intl.NumberFormat,he={trailing:!0};function pe(e,t=25,a={}){if(a={...he,...a},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let r,i,o=[],s,n;const u=(f,m)=>(s=ve(e,f,m),s.finally(()=>{if(s=null,a.trailing&&n&&!i){const d=u(f,n);return n=null,d}}),s);return function(...f){return s?(a.trailing&&(n=f),s):new Promise(m=>{const d=!i&&a.leading;clearTimeout(i),i=setTimeout(()=>{i=null;const v=a.leading?r:u(this,f);for(const h of o)h(v);o=[]},t),d?(r=u(this,f),m(r)):o.push(m)})}}async function ve(e,t,a){return await e.apply(t,a)}function Ye(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;_e(e[0],e[1])&&e.unshift(t);let[a,r,i={}]=e;const o=b(()=>V(a));if(typeof o.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const s=F();i.server??=!0,i.default??=be,i.getCachedData??=L,i.lazy??=!1,i.immediate??=!0,i.deep??=G.deep,i.dedupe??="cancel",i._functionName,s._asyncData[o.value];const n={cause:"initial",dedupe:i.dedupe};s._asyncData[o.value]?._init||(n.cachedData=i.getCachedData(o.value,s,{cause:"initial"}),s._asyncData[o.value]=$(s,o.value,r,i,n.cachedData));const u=s._asyncData[o.value];u._deps++;const f=()=>s._asyncData[o.value].execute(n),m=i.server!==!1&&s.payload.serverRendered;{let h=function(g){const y=s._asyncData[g];y?._deps&&(y._deps--,y._deps===0&&y?._off())};const c=J();if(c&&m&&i.immediate&&!c.sp&&(c.sp=[]),c&&!c._nuxtOnBeforeMountCbs){c._nuxtOnBeforeMountCbs=[];const g=c._nuxtOnBeforeMountCbs;X(()=>{g.forEach(y=>{y()}),g.splice(0,g.length)}),Y(()=>g.splice(0,g.length))}const _=c&&(c._nuxtClientOnly||Z(re,!1));m&&s.isHydrating&&(u.error.value||u.data.value!==void 0)?u.status.value=u.error.value?"error":"success":c&&(!_&&s.payload.serverRendered&&s.isHydrating||i.lazy)&&i.immediate?c._nuxtOnBeforeMountCbs.push(f):i.immediate&&u.status.value!=="success"&&f();const p=ae(),l=Q([o,...i.watch||[]],([g],[y])=>{if((g||y)&&g!==y){const q=s._asyncData[y]?.data.value!==void 0,A=s._asyncDataPromises[y]!==void 0;y&&h(y);const R={cause:"initial",dedupe:i.dedupe};if(!s._asyncData[g]?._init){let S;y&&q?S=s._asyncData[y]?.data.value:(S=i.getCachedData(g,s,{cause:"initial"}),R.cachedData=S),s._asyncData[g]=$(s,g,r,i,S)}s._asyncData[g]._deps++,(i.immediate||q||A)&&s._asyncData[g].execute(R)}else u._execute({cause:"watch",dedupe:i.dedupe})},{flush:"sync"});p&&K(()=>{l(),h(o.value)})}const d={data:C(()=>s._asyncData[o.value]?.data),pending:C(()=>s._asyncData[o.value]?.pending),status:C(()=>s._asyncData[o.value]?.status),error:C(()=>s._asyncData[o.value]?.error),refresh:(...h)=>s._asyncData[o.value].execute(...h),execute:(...h)=>s._asyncData[o.value].execute(...h),clear:()=>T(s,o.value)},v=Promise.resolve(s._asyncDataPromises[o.value]).then(()=>d);return Object.assign(v,d),v}function C(e){return b({get(){return e()?.value},set(t){const a=e();a&&(a.value=t)}})}function _e(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function T(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=void 0),e._asyncData[t]&&(e._asyncData[t].data.value=w(e._asyncData[t]._default()),e._asyncData[t].error.value=void 0,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]&&(e._asyncDataPromises[t].cancelled=!0),e._asyncDataPromises[t]=void 0)}function ye(e,t){const a={};for(const r of t)a[r]=e[r];return a}function $(e,t,a,r,i){e.payload._errors[t]??=void 0;const o=r.getCachedData!==L,s=a,n=r.deep?O:I,u=i!==void 0,f=e.hook("app:data:refresh",async d=>{(!d||d.includes(t))&&await m.execute({cause:"refresh:hook"})}),m={data:n(u?i:r.default()),pending:b(()=>m.status.value==="pending"),error:k(e.payload._errors,t),status:I("idle"),execute:(...d)=>{const[v,h=void 0]=d,c=v&&h===void 0&&typeof v=="object"?v:{};if(e._asyncDataPromises[t]){if((c.dedupe??r.dedupe)==="defer")return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}{const p="cachedData"in c?c.cachedData:r.getCachedData(t,e,{cause:c.cause??"refresh:manual"});if(p!==void 0)return e.payload.data[t]=m.data.value=p,m.error.value=void 0,m.status.value="success",Promise.resolve(p)}m.status.value="pending";const _=new Promise((p,l)=>{try{p(s(e))}catch(g){l(g)}}).then(async p=>{if(_.cancelled)return e._asyncDataPromises[t];let l=p;r.transform&&(l=await r.transform(p)),r.pick&&(l=ye(l,r.pick)),e.payload.data[t]=l,m.data.value=l,m.error.value=void 0,m.status.value="success"}).catch(p=>{if(_.cancelled)return e._asyncDataPromises[t];m.error.value=te(p),m.data.value=w(r.default()),m.status.value="error"}).finally(()=>{_.cancelled||delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=_,e._asyncDataPromises[t]},_execute:pe((...d)=>m.execute(...d),0,{leading:!0}),_default:r.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{f(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),o||ee(()=>{e._asyncData[t]?._init||(T(e,t),m.execute=()=>Promise.resolve())})}};return m}const be=()=>{},L=(e,t,a)=>{if(t.isHydrating)return t.payload.data[e];if(a.cause!=="refresh:manual"&&a.cause!=="refresh:hook")return t.static.data[e]};async function De(e,t){return await we(t).catch(r=>(console.error("Failed to get image meta for "+t,r+""),{width:0,height:0,ratio:0}))}async function we(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,a)=>{const r=new Image;r.onload=()=>{const i={width:r.width,height:r.height,ratio:r.width/r.height};t(i)},r.onerror=i=>a(i),r.src=e})}function j(e){return t=>t?e[t]||t:e.missingValue}function Se({formatter:e,keyMap:t,joinWith:a="/",valueMap:r}={}){e||(e=(o,s)=>`${o}=${s}`),t&&typeof t!="function"&&(t=j(t));const i=r||{};return Object.keys(i).forEach(o=>{typeof i[o]!="function"&&(i[o]=j(i[o]))}),(o={})=>Object.entries(o).filter(([n,u])=>typeof u<"u").map(([n,u])=>{const f=i[n];return typeof f=="function"&&(u=f(o[n])),n=typeof t=="function"?t(n):n,e(n,u)}).join(a)}function D(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function Ce(e=""){if(e===void 0||!e.length)return[];const t=new Set;for(const a of e.split(" ")){const r=Number.parseInt(a.replace("x",""));r&&t.add(r)}return Array.from(t)}function Oe(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function Pe(e){const t={};if(typeof e=="string")for(const a of e.split(/[\s,]+/).filter(r=>r)){const r=a.split(":");r.length!==2?t["1px"]=r[0].trim():t[r[0].trim()]=r[1].trim()}else Object.assign(t,e);return t}function Fe(e){const t={options:e},a=(i,o={})=>U(t,i,o),r=(i,o={},s={})=>a(i,{...s,modifiers:B(o,s.modifiers||{})}).url;for(const i in e.presets)r[i]=(o,s,n)=>r(o,s,{...e.presets[i],...n});return r.options=e,r.getImage=a,r.getMeta=(i,o)=>qe(t,i,o),r.getSizes=(i,o)=>ze(t,i,o),t.$img=r,r}async function qe(e,t,a){const r=U(e,t,{...a});return typeof r.getMeta=="function"?await r.getMeta():await De(e,r.url)}function U(e,t,a){if(t&&typeof t!="string")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(!t||t.startsWith("data:"))return{url:t};const{provider:r,defaults:i}=Re(e,a.provider||e.options.provider),o=Ie(e,a.preset);if(t=z(t)?t:ie(t),!r.supportsAlias){for(const f in e.options.alias)if(t.startsWith(f)){const m=e.options.alias[f];m&&(t=P(m,t.slice(f.length)))}}if(r.validateDomains&&z(t)){const f=se(t).host;if(!e.options.domains.find(m=>m===f))return{url:t}}const s=B(a,o,i);s.modifiers={...s.modifiers};const n=s.modifiers.format;s.modifiers?.width&&(s.modifiers.width=D(s.modifiers.width)),s.modifiers?.height&&(s.modifiers.height=D(s.modifiers.height));const u=r.getImage(t,s,e);return u.format=u.format||n||"",u}function Re(e,t){const a=e.options.providers[t];if(!a)throw new Error("Unknown provider: "+t);return a}function Ie(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function ze(e,t,a){const r=D(a.modifiers?.width),i=D(a.modifiers?.height),o=Pe(a.sizes),s=a.densities?.trim()?Ce(a.densities.trim()):e.options.densities;Oe(s);const n=r&&i?i/r:0,u=[],f=[];if(Object.keys(o).length>=1){for(const c in o){const _=E(c,String(o[c]),i,n,e);if(_!==void 0){u.push({size:_.size,screenMaxWidth:_.screenMaxWidth,media:`(max-width: ${_.screenMaxWidth}px)`});for(const p of s)f.push({width:_._cWidth*p,src:x(e,t,a,_,p)})}}Me(u)}else for(const c of s){const _=Object.keys(o)[0];let p=_?E(_,String(o[_]),i,n,e):void 0;p===void 0&&(p={size:"",screenMaxWidth:0,_cWidth:a.modifiers?.width,_cHeight:a.modifiers?.height}),f.push({width:c,src:x(e,t,a,p,c)})}Ne(f);const m=f[f.length-1],d=u.length?u.map(c=>`${c.media?c.media+" ":""}${c.size}`).join(", "):void 0,v=d?"w":"x",h=f.map(c=>`${c.src} ${c.width}${v}`).join(", ");return{sizes:d,srcset:h,src:m?.src}}function E(e,t,a,r,i){const o=i.options.screens&&i.options.screens[e]||Number.parseInt(e),s=t.endsWith("vw");if(!s&&/^\d+$/.test(t)&&(t=t+"px"),!s&&!t.endsWith("px"))return;let n=Number.parseInt(t);if(!o||!n)return;s&&(n=Math.round(n/100*o));const u=r?Math.round(n*r):a;return{size:t,screenMaxWidth:o,_cWidth:n,_cHeight:u}}function x(e,t,a,r,i){return e.$img(t,{...a.modifiers,width:r._cWidth?r._cWidth*i:void 0,height:r._cHeight?r._cHeight*i:void 0},a)}function Me(e){e.sort((a,r)=>a.screenMaxWidth-r.screenMaxWidth);let t=null;for(let a=e.length-1;a>=0;a--){const r=e[a];r.media===t&&e.splice(a,1),t=r.media}for(let a=0;a<e.length;a++)e[a].media=e[a+1]?.media||""}function Ne(e){e.sort((a,r)=>a.width-r.width);let t=null;for(let a=e.length-1;a>=0;a--){const r=e[a];r.width===t&&e.splice(a,1),t=r.width}}const $e=Se({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,t)=>M(e)+"_"+M(t)}),je=!0,Ee=!0,xe=(e,{modifiers:t={},baseURL:a}={},r)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const i=$e(t)||"_";return a||(a=P(r.options.nuxt.baseURL,"/_ipx")),{url:P(a,i,oe(e).replace(/\/{2,}/g,"/"))}},We=Object.freeze(Object.defineProperty({__proto__:null,getImage:xe,supportsAlias:Ee,validateDomains:je},Symbol.toStringTag,{value:"Module"})),Be={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"],providers:{ipxStatic:{provider:We,defaults:{}}}},H=e=>{const t=ne(),a=F();return a.$img||a._img||(a._img=Fe({...Be,event:a.ssrContext?.event,nuxt:{baseURL:t.app.baseURL},runtimeConfig:t}))};function Te(e){performance?.mark?.("mark_feature_usage",{detail:{feature:e}})}const Le={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},Ue=e=>{const t=b(()=>({provider:e.provider,preset:e.preset})),a=b(()=>({width:D(e.width),height:D(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),r=H(),i=b(()=>({...e.modifiers,width:D(e.width),height:D(e.height),format:e.format,quality:e.quality||r.options.quality,background:e.background,fit:e.fit}));return{options:t,attrs:a,modifiers:i}},He={...Le,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1},custom:{type:Boolean,required:!1}},Ae=["src"],Ve=ce({__name:"NuxtImg",props:He,emits:["load","error"],setup(e,{emit:t}){const a=e,r=le(),i=t,o=!1,s=H(),n=Ue(a),u=O(!1),f=O(),m=b(()=>s.getSizes(a.src,{...n.options.value,sizes:a.sizes,densities:a.densities,modifiers:{...n.modifiers.value,width:D(a.width),height:D(a.height)}})),d=b(()=>{const l={...n.attrs.value,"data-nuxt-img":""};return(!a.placeholder||u.value)&&(l.sizes=m.value.sizes,l.srcset=m.value.srcset),l}),v=b(()=>{let l=a.placeholder;if(l===""&&(l=!0),!l||u.value)return!1;if(typeof l=="string")return l;const g=Array.isArray(l)?l:typeof l=="number"?[l,l]:[10,10];return s(a.src,{...n.modifiers.value,width:g[0],height:g[1],quality:g[2]||50,blur:g[3]||3},n.options.value)}),h=b(()=>a.sizes?m.value.src:s(a.src,n.modifiers.value,n.options.value)),c=b(()=>v.value?v.value:h.value),p=F().isHydrating;return ue(()=>{if(v.value||a.custom){const l=new Image;h.value&&(l.src=h.value),a.sizes&&(l.sizes=m.value.sizes||"",l.srcset=m.value.srcset),l.onload=g=>{u.value=!0,i("load",g)},l.onerror=g=>{i("error",g)},Te("nuxt-image");return}f.value&&(f.value.complete&&p&&(f.value.getAttribute("data-error")?i("error",new Event("error")):i("load",new Event("load"))),f.value.onload=l=>{i("load",l)},f.value.onerror=l=>{i("error",l)})}),(l,g)=>l.custom?de(l.$slots,"default",fe(N({key:1},{...w(o)?{onerror:"this.setAttribute('data-error', 1)"}:{},imgAttrs:{...d.value,...w(r)},isLoaded:u.value,src:c.value}))):(ge(),me("img",N({key:0,ref_key:"imgEl",ref:f,class:v.value&&!u.value?l.placeholderClass:void 0},{...w(o)?{onerror:"this.setAttribute('data-error', 1)"}:{},...d.value,...w(r)},{src:c.value}),null,16,Ae))}}),Ze=Object.assign(Ve,{__name:"NuxtImg"}),Ge=[{id:1,title:"1-комнатная №101",roomCount:1,area:42.6,floor:1,numberOfFloors:17,price:83e5,image:"/images/apartments/1_room_v1.png"},{id:2,title:"1-комнатная №102",roomCount:1,area:45,floor:1,numberOfFloors:17,price:85e5,image:"/images/apartments/1_room_v2.png"},{id:3,title:"2-комнатная №103",roomCount:2,area:56,floor:1,numberOfFloors:17,price:109e5,image:"/images/apartments/2_room_v1.png"},{id:4,title:"3-комнатная №104",roomCount:3,area:81.7,floor:1,numberOfFloors:17,price:147e5,image:"/images/apartments/3_room_v1.png"},{id:5,title:"2-комнатная №105",roomCount:2,area:60.6,floor:1,numberOfFloors:17,price:115e5,image:"/images/apartments/2_room_v2.png"},{id:6,title:"3-комнатная №106",roomCount:3,area:71.7,floor:1,numberOfFloors:17,price:127e5,image:"/images/apartments/3_room_v2.png"},{id:11,title:"1-комнатная №201",roomCount:1,area:42.6,floor:2,numberOfFloors:17,price:83e5,image:"/images/apartments/1_room_v1.png"},{id:12,title:"1-комнатная №202",roomCount:1,area:45,floor:2,numberOfFloors:17,price:85e5,image:"/images/apartments/1_room_v2.png"},{id:13,title:"2-комнатная №203",roomCount:2,area:56,floor:2,numberOfFloors:17,price:109e5,image:"/images/apartments/2_room_v1.png"},{id:14,title:"3-комнатная №204",roomCount:3,area:81.7,floor:2,numberOfFloors:17,price:147e5,image:"/images/apartments/3_room_v1.png"},{id:15,title:"2-комнатная №205",roomCount:2,area:60.6,floor:2,numberOfFloors:17,price:115e5,image:"/images/apartments/2_room_v2.png"},{id:16,title:"3-комнатная №206",roomCount:3,area:71.7,floor:2,numberOfFloors:17,price:127e5,image:"/images/apartments/3_room_v2.png"},{id:21,title:"1-комнатная №301",roomCount:1,area:42.6,floor:3,numberOfFloors:17,price:83e5,image:"/images/apartments/1_room_v1.png"},{id:22,title:"1-комнатная №302",roomCount:1,area:45,floor:3,numberOfFloors:17,price:85e5,image:"/images/apartments/1_room_v2.png"},{id:23,title:"2-комнатная №303",roomCount:2,area:56,floor:3,numberOfFloors:17,price:109e5,image:"/images/apartments/2_room_v1.png"},{id:24,title:"3-комнатная №304",roomCount:3,area:81.7,floor:3,numberOfFloors:17,price:147e5,image:"/images/apartments/3_room_v1.png"},{id:25,title:"2-комнатная №305",roomCount:2,area:60.6,floor:3,numberOfFloors:17,price:115e5,image:"/images/apartments/2_room_v2.png"},{id:26,title:"3-комнатная №306",roomCount:3,area:71.7,floor:3,numberOfFloors:17,price:127e5,image:"/images/apartments/3_room_v2.png"},{id:31,title:"1-комнатная №401",roomCount:1,area:42.6,floor:4,numberOfFloors:17,price:83e5,image:"/images/apartments/1_room_v1.png"},{id:32,title:"1-комнатная №402",roomCount:1,area:45,floor:4,numberOfFloors:17,price:85e5,image:"/images/apartments/1_room_v2.png"},{id:33,title:"2-комнатная №403",roomCount:2,area:56,floor:4,numberOfFloors:17,price:109e5,image:"/images/apartments/2_room_v1.png"},{id:34,title:"3-комнатная №404",roomCount:3,area:81.7,floor:4,numberOfFloors:17,price:147e5,image:"/images/apartments/3_room_v1.png"},{id:35,title:"2-комнатная №405",roomCount:2,area:60.6,floor:4,numberOfFloors:17,price:115e5,image:"/images/apartments/2_room_v2.png"},{id:36,title:"3-комнатная №406",roomCount:3,area:71.7,floor:4,numberOfFloors:17,price:127e5,image:"/images/apartments/3_room_v2.png"}],W={data:Ge},Qe={getApartments:async e=>Promise.resolve(W).then(t=>{const r=(e.page-1)*10,i=r+10,o=d=>{const v=!e.apartmentFilters.areaRange||d.area>=e.apartmentFilters.areaRange[0]&&d.area<=e.apartmentFilters.areaRange[1],h=!e.apartmentFilters.priceRange||d.price>=e.apartmentFilters.priceRange[0]&&d.price<=e.apartmentFilters.priceRange[1],c=!e.apartmentFilters.roomCountArray.length||e.apartmentFilters.roomCountArray.includes(d.roomCount);return v&&h&&c},s=(d,v)=>{const h=e.apartmentSortParams?.sortBy?d[e.apartmentSortParams.sortBy]:null,c=e.apartmentSortParams?.sortBy?v[e.apartmentSortParams.sortBy]:null;if(h&&c){if(h<c)return e.apartmentSortParams.sortDir==="asc"?-1:1;if(h>c)return e.apartmentSortParams.sortDir==="asc"?1:-1}return 0},n=t.data.filter(o).sort(s),u=n.slice(r,i),f={availableAreaRange:[Math.min(...t.data.map(d=>d.area)),Math.max(...t.data.map(d=>d.area))],availablePriceRange:[Math.min(...t.data.map(d=>d.price)),Math.max(...t.data.map(d=>d.price))],availableRoomCountArray:Array.from(new Set(t.data.map(d=>d.roomCount)))};return{data:u,page:e.page,limit:10,total:n.length||0,hasMore:i<n?.length,availableFilters:f}}),getApartmentById:async e=>Promise.resolve(W).then(t=>t.data.find(a=>a.id===e))};export{Ze as _,Qe as a,Xe as f,Ye as u};
