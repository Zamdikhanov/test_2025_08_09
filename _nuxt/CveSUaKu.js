import{c as D,t as G,U as R,V,g as X,W as Y,D as Z,i as J,w as Q,X as K,r as q,s as M,Y as k,n as ee,Z as te,u as b,$ as ae,a0 as re,a1 as F,a2 as se,a3 as $,a4 as C,a5 as ie,a6 as j,a7 as ne,a8 as oe,d as ce,a9 as ue,o as le,q as de,l as fe,m as E,aa as me,j as he}from"./khkl1ipG.js";const{format:Xe}=new Intl.NumberFormat,ge={trailing:!0};function ve(e,t=25,a={}){if(a={...ge,...a},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let r,s,n=[],i,o;const l=(m,d)=>(i=pe(e,m,d),i.finally(()=>{if(i=null,a.trailing&&o&&!s){const f=l(m,o);return o=null,f}}),i);return function(...m){return i?(a.trailing&&(o=m),i):new Promise(d=>{const f=!s&&a.leading;clearTimeout(s),s=setTimeout(()=>{s=null;const p=a.leading?r:l(this,m);for(const g of n)g(p);n=[]},t),f?(r=l(this,m),d(r)):n.push(d)})}}async function pe(e,t,a){return await e.apply(t,a)}function Ye(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;_e(e[0],e[1])&&e.unshift(t);let[a,r,s={}]=e;const n=D(()=>G(a));if(typeof n.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const i=R();s.server??=!0,s.default??=De,s.getCachedData??=L,s.lazy??=!1,s.immediate??=!0,s.deep??=V.deep,s.dedupe??="cancel",s._functionName,i._asyncData[n.value];const o={cause:"initial",dedupe:s.dedupe};i._asyncData[n.value]?._init||(o.cachedData=s.getCachedData(n.value,i,{cause:"initial"}),i._asyncData[n.value]=N(i,n.value,r,s,o.cachedData));const l=i._asyncData[n.value];l._deps++;const m=()=>i._asyncData[n.value].execute(o),d=s.server!==!1&&i.payload.serverRendered;{let g=function(h){const y=i._asyncData[h];y?._deps&&(y._deps--,y._deps===0&&y?._off())};const c=X();if(c&&d&&s.immediate&&!c.sp&&(c.sp=[]),c&&!c._nuxtOnBeforeMountCbs){c._nuxtOnBeforeMountCbs=[];const h=c._nuxtOnBeforeMountCbs;Y(()=>{h.forEach(y=>{y()}),h.splice(0,h.length)}),Z(()=>h.splice(0,h.length))}const _=c&&(c._nuxtClientOnly||J(re,!1));d&&i.isHydrating&&(l.error.value||l.data.value!==void 0)?l.status.value=l.error.value?"error":"success":c&&(!_&&i.payload.serverRendered&&i.isHydrating||s.lazy)&&s.immediate?c._nuxtOnBeforeMountCbs.push(m):s.immediate&&l.status.value!=="success"&&m();const v=ae(),u=Q([n,...s.watch||[]],([h],[y])=>{if((h||y)&&h!==y){const I=i._asyncData[y]?.data.value!==void 0,H=i._asyncDataPromises[y]!==void 0;y&&g(y);const z={cause:"initial",dedupe:s.dedupe};if(!i._asyncData[h]?._init){let S;y&&I?S=i._asyncData[y]?.data.value:(S=s.getCachedData(h,i,{cause:"initial"}),z.cachedData=S),i._asyncData[h]=N(i,h,r,s,S)}i._asyncData[h]._deps++,(s.immediate||I||H)&&i._asyncData[h].execute(z)}else l._execute({cause:"watch",dedupe:s.dedupe})},{flush:"sync"});v&&K(()=>{u(),g(n.value)})}const f={data:P(()=>i._asyncData[n.value]?.data),pending:P(()=>i._asyncData[n.value]?.pending),status:P(()=>i._asyncData[n.value]?.status),error:P(()=>i._asyncData[n.value]?.error),refresh:(...g)=>i._asyncData[n.value].execute(...g),execute:(...g)=>i._asyncData[n.value].execute(...g),clear:()=>T(i,n.value)},p=Promise.resolve(i._asyncDataPromises[n.value]).then(()=>f);return Object.assign(p,f),p}function P(e){return D({get(){return e()?.value},set(t){const a=e();a&&(a.value=t)}})}function _e(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function T(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=void 0),e._asyncData[t]&&(e._asyncData[t].data.value=b(e._asyncData[t]._default()),e._asyncData[t].error.value=void 0,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]&&(e._asyncDataPromises[t].cancelled=!0),e._asyncDataPromises[t]=void 0)}function ye(e,t){const a={};for(const r of t)a[r]=e[r];return a}function N(e,t,a,r,s){e.payload._errors[t]??=void 0;const n=r.getCachedData!==L,i=a,o=r.deep?q:M,l=s!==void 0,m=e.hook("app:data:refresh",async f=>{(!f||f.includes(t))&&await d.execute({cause:"refresh:hook"})}),d={data:o(l?s:r.default()),pending:D(()=>d.status.value==="pending"),error:k(e.payload._errors,t),status:M("idle"),execute:(...f)=>{const[p,g=void 0]=f,c=p&&g===void 0&&typeof p=="object"?p:{};if(e._asyncDataPromises[t]){if((c.dedupe??r.dedupe)==="defer")return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}{const v="cachedData"in c?c.cachedData:r.getCachedData(t,e,{cause:c.cause??"refresh:manual"});if(v!==void 0)return e.payload.data[t]=d.data.value=v,d.error.value=void 0,d.status.value="success",Promise.resolve(v)}d.status.value="pending";const _=new Promise((v,u)=>{try{v(i(e))}catch(h){u(h)}}).then(async v=>{if(_.cancelled)return e._asyncDataPromises[t];let u=v;r.transform&&(u=await r.transform(v)),r.pick&&(u=ye(u,r.pick)),e.payload.data[t]=u,d.data.value=u,d.error.value=void 0,d.status.value="success"}).catch(v=>{if(_.cancelled)return e._asyncDataPromises[t];d.error.value=te(v),d.data.value=b(r.default()),d.status.value="error"}).finally(()=>{_.cancelled||delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=_,e._asyncDataPromises[t]},_execute:ve((...f)=>d.execute(...f),0,{leading:!0}),_default:r.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{m(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),n||ee(()=>{e._asyncData[t]?._init||(T(e,t),d.execute=()=>Promise.resolve())})}};return d}const De=()=>{},L=(e,t,a)=>{if(t.isHydrating)return t.payload.data[e];if(a.cause!=="refresh:manual"&&a.cause!=="refresh:hook")return t.static.data[e]};async function we(e,t){return await be(t).catch(r=>(console.error("Failed to get image meta for "+t,r+""),{width:0,height:0,ratio:0}))}async function be(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,a)=>{const r=new Image;r.onload=()=>{const s={width:r.width,height:r.height,ratio:r.width/r.height};t(s)},r.onerror=s=>a(s),r.src=e})}function x(e){return t=>t?e[t]||t:e.missingValue}function Se({formatter:e,keyMap:t,joinWith:a="/",valueMap:r}={}){e||(e=(n,i)=>`${n}=${i}`),t&&typeof t!="function"&&(t=x(t));const s=r||{};return Object.keys(s).forEach(n=>{typeof s[n]!="function"&&(s[n]=x(s[n]))}),(n={})=>Object.entries(n).filter(([o,l])=>typeof l<"u").map(([o,l])=>{const m=s[o];return typeof m=="function"&&(l=m(n[o])),o=typeof t=="function"?t(o):o,e(o,l)}).join(a)}function w(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function Pe(e=""){if(e===void 0||!e.length)return[];const t=new Set;for(const a of e.split(" ")){const r=Number.parseInt(a.replace("x",""));r&&t.add(r)}return Array.from(t)}function qe(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function Ce(e){const t={};if(typeof e=="string")for(const a of e.split(/[\s,]+/).filter(r=>r)){const r=a.split(":");r.length!==2?t["1px"]=r[0].trim():t[r[0].trim()]=r[1].trim()}else Object.assign(t,e);return t}function Re(e){const t={options:e},a=(s,n={})=>U(t,s,n),r=(s,n={},i={})=>a(s,{...i,modifiers:F(n,i.modifiers||{})}).url;for(const s in e.presets)r[s]=(n,i,o)=>r(n,i,{...e.presets[s],...o});return r.options=e,r.getImage=a,r.getMeta=(s,n)=>Ie(t,s,n),r.getSizes=(s,n)=>$e(t,s,n),t.$img=r,r}async function Ie(e,t,a){const r=U(e,t,{...a});return typeof r.getMeta=="function"?await r.getMeta():await we(e,r.url)}function U(e,t,a){if(t&&typeof t!="string")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(!t||t.startsWith("data:"))return{url:t};const{provider:r,defaults:s}=ze(e,a.provider||e.options.provider),n=Me(e,a.preset);if(t=$(t)?t:se(t),!r.supportsAlias){for(const m in e.options.alias)if(t.startsWith(m)){const d=e.options.alias[m];d&&(t=C(d,t.slice(m.length)))}}if(r.validateDomains&&$(t)){const m=ie(t).host;if(!e.options.domains.find(d=>d===m))return{url:t}}const i=F(a,n,s);i.modifiers={...i.modifiers};const o=i.modifiers.format;i.modifiers?.width&&(i.modifiers.width=w(i.modifiers.width)),i.modifiers?.height&&(i.modifiers.height=w(i.modifiers.height));const l=r.getImage(t,i,e);return l.format=l.format||o||"",l}function ze(e,t){const a=e.options.providers[t];if(!a)throw new Error("Unknown provider: "+t);return a}function Me(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function $e(e,t,a){const r=w(a.modifiers?.width),s=w(a.modifiers?.height),n=Ce(a.sizes),i=a.densities?.trim()?Pe(a.densities.trim()):e.options.densities;qe(i);const o=r&&s?s/r:0,l=[],m=[];if(Object.keys(n).length>=1){for(const c in n){const _=O(c,String(n[c]),s,o,e);if(_!==void 0){l.push({size:_.size,screenMaxWidth:_.screenMaxWidth,media:`(max-width: ${_.screenMaxWidth}px)`});for(const v of i)m.push({width:_._cWidth*v,src:W(e,t,a,_,v)})}}je(l)}else for(const c of i){const _=Object.keys(n)[0];let v=_?O(_,String(n[_]),s,o,e):void 0;v===void 0&&(v={size:"",screenMaxWidth:0,_cWidth:a.modifiers?.width,_cHeight:a.modifiers?.height}),m.push({width:c,src:W(e,t,a,v,c)})}Ee(m);const d=m[m.length-1],f=l.length?l.map(c=>`${c.media?c.media+" ":""}${c.size}`).join(", "):void 0,p=f?"w":"x",g=m.map(c=>`${c.src} ${c.width}${p}`).join(", ");return{sizes:f,srcset:g,src:d?.src}}function O(e,t,a,r,s){const n=s.options.screens&&s.options.screens[e]||Number.parseInt(e),i=t.endsWith("vw");if(!i&&/^\d+$/.test(t)&&(t=t+"px"),!i&&!t.endsWith("px"))return;let o=Number.parseInt(t);if(!n||!o)return;i&&(o=Math.round(o/100*n));const l=r?Math.round(o*r):a;return{size:t,screenMaxWidth:n,_cWidth:o,_cHeight:l}}function W(e,t,a,r,s){return e.$img(t,{...a.modifiers,width:r._cWidth?r._cWidth*s:void 0,height:r._cHeight?r._cHeight*s:void 0},a)}function je(e){e.sort((a,r)=>a.screenMaxWidth-r.screenMaxWidth);let t=null;for(let a=e.length-1;a>=0;a--){const r=e[a];r.media===t&&e.splice(a,1),t=r.media}for(let a=0;a<e.length;a++)e[a].media=e[a+1]?.media||""}function Ee(e){e.sort((a,r)=>a.width-r.width);let t=null;for(let a=e.length-1;a>=0;a--){const r=e[a];r.width===t&&e.splice(a,1),t=r.width}}const Ne=Se({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,t)=>j(e)+"_"+j(t)}),xe=!0,Oe=!0,We=(e,{modifiers:t={},baseURL:a}={},r)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const s=Ne(t)||"_";return a||(a=C(r.options.nuxt.baseURL,"/_ipx")),{url:C(a,s,ne(e).replace(/\/{2,}/g,"/"))}},Be=Object.freeze(Object.defineProperty({__proto__:null,getImage:We,supportsAlias:Oe,validateDomains:xe},Symbol.toStringTag,{value:"Module"})),Fe={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"],providers:{ipxStatic:{provider:Be,defaults:{}}}},A=e=>{const t=oe(),a=R();return a.$img||a._img||(a._img=Re({...Fe,event:a.ssrContext?.event,nuxt:{baseURL:t.app.baseURL},runtimeConfig:t}))};function Te(e){performance?.mark?.("mark_feature_usage",{detail:{feature:e}})}const Le={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},Ue=e=>{const t=D(()=>({provider:e.provider,preset:e.preset})),a=D(()=>({width:w(e.width),height:w(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),r=A(),s=D(()=>({...e.modifiers,width:w(e.width),height:w(e.height),format:e.format,quality:e.quality||r.options.quality,background:e.background,fit:e.fit}));return{options:t,attrs:a,modifiers:s}},Ae={...Le,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1},custom:{type:Boolean,required:!1}},He=["src"],Ge=ce({__name:"NuxtImg",props:Ae,emits:["load","error"],setup(e,{emit:t}){const a=e,r=ue(),s=t,n=!1,i=A(),o=Ue(a),l=q(!1),m=q(),d=D(()=>i.getSizes(a.src,{...o.options.value,sizes:a.sizes,densities:a.densities,modifiers:{...o.modifiers.value,width:w(a.width),height:w(a.height)}})),f=D(()=>{const u={...o.attrs.value,"data-nuxt-img":""};return(!a.placeholder||l.value)&&(u.sizes=d.value.sizes,u.srcset=d.value.srcset),u}),p=D(()=>{let u=a.placeholder;if(u===""&&(u=!0),!u||l.value)return!1;if(typeof u=="string")return u;const h=Array.isArray(u)?u:typeof u=="number"?[u,u]:[10,10];return i(a.src,{...o.modifiers.value,width:h[0],height:h[1],quality:h[2]||50,blur:h[3]||3},o.options.value)}),g=D(()=>a.sizes?d.value.src:i(a.src,o.modifiers.value,o.options.value)),c=D(()=>p.value?p.value:g.value),v=R().isHydrating;return le(()=>{if(p.value||a.custom){const u=new Image;g.value&&(u.src=g.value),a.sizes&&(u.sizes=d.value.sizes||"",u.srcset=d.value.srcset),u.onload=h=>{l.value=!0,s("load",h)},u.onerror=h=>{s("error",h)},Te("nuxt-image");return}m.value&&(m.value.complete&&v&&(m.value.getAttribute("data-error")?s("error",new Event("error")):s("load",new Event("load"))),m.value.onload=u=>{s("load",u)},m.value.onerror=u=>{s("error",u)})}),(u,h)=>u.custom?fe(u.$slots,"default",me(E({key:1},{...b(n)?{onerror:"this.setAttribute('data-error', 1)"}:{},imgAttrs:{...f.value,...b(r)},isLoaded:l.value,src:c.value}))):(he(),de("img",E({key:0,ref_key:"imgEl",ref:m,class:p.value&&!l.value?u.placeholderClass:void 0},{...b(n)?{onerror:"this.setAttribute('data-error', 1)"}:{},...f.value,...b(r)},{src:c.value}),null,16,He))}}),Ze=Object.assign(Ge,{__name:"NuxtImg"}),B="https://zamdikhanov.github.io/test_2025_08_09",Je={getApartments:async e=>$fetch(B+"/apartments.json",{method:"GET",params:{...e.apartmentSortParams,...e.apartmentFilters,page:e.page}}).then(t=>{const r=(e.page-1)*10,s=r+10,n=f=>{const p=!e.apartmentFilters.areaRange||f.area>=e.apartmentFilters.areaRange[0]&&f.area<=e.apartmentFilters.areaRange[1],g=!e.apartmentFilters.priceRange||f.price>=e.apartmentFilters.priceRange[0]&&f.price<=e.apartmentFilters.priceRange[1],c=!e.apartmentFilters.roomCountArray.length||e.apartmentFilters.roomCountArray.includes(f.roomCount);return p&&g&&c},i=(f,p)=>{const g=e.apartmentSortParams?.sortBy?f[e.apartmentSortParams.sortBy]:null,c=e.apartmentSortParams?.sortBy?p[e.apartmentSortParams.sortBy]:null;if(g&&c){if(g<c)return e.apartmentSortParams.sortDir==="asc"?-1:1;if(g>c)return e.apartmentSortParams.sortDir==="asc"?1:-1}return 0},o=t.data.filter(n).sort(i),l=o.slice(r,s),m={availableAreaRange:[Math.min(...t.data.map(f=>f.area)),Math.max(...t.data.map(f=>f.area))],availablePriceRange:[Math.min(...t.data.map(f=>f.price)),Math.max(...t.data.map(f=>f.price))],availableRoomCountArray:Array.from(new Set(t.data.map(f=>f.roomCount)))};return{data:l,page:e.page,limit:10,total:o.length||0,hasMore:s<o?.length,availableFilters:m}}),getApartmentById:async e=>$fetch(B+"/apartments.json",{method:"GET"}).then(t=>t.data.find(a=>a.id===e))};export{Ze as _,Je as a,Xe as f,Ye as u};
